<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"
          th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" type="text/css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" th:href="@{/vendor/font-awesome/css/font-awesome.min.css}" type="text/css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" th:href="@{/css/fontastic.css}" type="text/css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" th:href="@{/css/style.default.css}" id="theme-stylesheet}" type="text/css">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" th:href="@{/css/custom.css}" type="text/css">
    <!-- Favicon-->
    <link rel="shortcut icon" th:href="@{/img/favicon.ico}" type="text/css">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<body onload="getCookie();">
<form class="form-horizontal" action="/hotel/user/sign-in" method="post">
    <div class="page login-page">
        <div class="container d-flex align-items-center">
            <div class="form-holder has-shadow">
                <div class="row">
                    <!-- Logo & Information Panel-->
                    <div class="col-lg-6">
                        <div class="info d-flex align-items-center">
                            <div class="content">
                                <div class="logo">
                                    <h1>欢迎使用ALTER SOFTWARE酒店管理系统</h1>
                                </div>
                                <p>Welcome to alter software hotel management system</p>
                            </div>
                        </div>
                    </div>
                    <!-- Form Panel    -->
                    <div class="col-lg-6 bg-white">
                        <div class="form d-flex align-items-center">
                            <div class="content">
                                <form class="form-validate" method="post">
                                    <div class="form-group">
                                        <input id="login-username" type="text" name="number" required
                                               data-msg="学号/职工号不能为空" class="input-material"/>
                                        <label for="login-username" class="label-material">用户名</label>


                                    </div>
                                    <div class="form-group">
                                        <input id="login-password" type="password" name="password" required
                                               data-msg="密码不能为空" class="input-material"/>
                                        <label for="login-password" class="label-material">密码</label>
                                    </div>
                                    <h6 th:text="${msg}" style="color: red"></h6>
                                    <div class="form-group">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" name="rememberMe"> 记住我
                                                <!--选择是否打勾的选项-->
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <input id="login" class="btn btn-primary btn-block" type="submit"
                                               value="登录"></input>
                                    </div>
                                </form>
                                <!-- This should be submit button but I replaced it with <a> for demo purposes-->
                                <a href="/hotel/user/verify-identity-step-a" class="forgot-pass">找回密码</a><br>
                                <small>Do not have an account?</small>
                                <a href="/hotel/user/sign-up" class="signup">Signup</a>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="copyrights text-center">
            <p>Design by <a href="#" class="external">@1212</a>
                <!-- Please do not remove the backlink to us unless you support further theme's development at https://bootstrapious.com/donate. It is part of the license conditions. Thank you for understanding :)-->
            </p>
        </div>
    </div>
</form>
<!-- JavaScript files-->
<script>
    var Base64 = {
        _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", encode: function (e) {
            var t = "";
            var n, r, i, s, o, u, a;
            var f = 0;
            e = Base64._utf8_encode(e);
            while (f < e.length) {
                n = e.charCodeAt(f++);
                r = e.charCodeAt(f++);
                i = e.charCodeAt(f++);
                s = n >> 2;
                o = (n & 3) << 4 | r >> 4;
                u = (r & 15) << 2 | i >> 6;
                a = i & 63;
                if (isNaN(r)) {
                    u = a = 64
                } else if (isNaN(i)) {
                    a = 64
                }
                t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
            }
            return t
        }, decode: function (e) {
            var t = "";
            var n, r, i;
            var s, o, u, a;
            var f = 0;
            e = e.replace(/[^A-Za-z0-9+/=]/g, "");
            while (f < e.length) {
                s = this._keyStr.indexOf(e.charAt(f++));
                o = this._keyStr.indexOf(e.charAt(f++));
                u = this._keyStr.indexOf(e.charAt(f++));
                a = this._keyStr.indexOf(e.charAt(f++));
                n = s << 2 | o >> 4;
                r = (o & 15) << 4 | u >> 2;
                i = (u & 3) << 6 | a;
                t = t + String.fromCharCode(n);
                if (u != 64) {
                    t = t + String.fromCharCode(r)
                }
                if (a != 64) {
                    t = t + String.fromCharCode(i)
                }
            }
            t = Base64._utf8_decode(t);
            return t
        }, _utf8_encode: function (e) {
            e = e.replace(/rn/g, "n");
            var t = "";
            for (var n = 0; n < e.length; n++) {
                var r = e.charCodeAt(n);
                if (r < 128) {
                    t += String.fromCharCode(r)
                } else if (r > 127 && r < 2048) {
                    t += String.fromCharCode(r >> 6 | 192);
                    t += String.fromCharCode(r & 63 | 128)
                } else {
                    t += String.fromCharCode(r >> 12 | 224);
                    t += String.fromCharCode(r >> 6 & 63 | 128);
                    t += String.fromCharCode(r & 63 | 128)
                }
            }
            return t
        }, _utf8_decode: function (e) {
            var t = "";
            var n = 0;
            var r = c1 = c2 = 0;
            while (n < e.length) {
                r = e.charCodeAt(n);
                if (r < 128) {
                    t += String.fromCharCode(r);
                    n++
                } else if (r > 191 && r < 224) {
                    c2 = e.charCodeAt(n + 1);
                    t += String.fromCharCode((r & 31) << 6 | c2 & 63);
                    n += 2
                } else {
                    c2 = e.charCodeAt(n + 1);
                    c3 = e.charCodeAt(n + 2);
                    t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                    n += 3
                }
            }
            return t
        }
    };

    function setCookie() { //设置cookie    
        var number = $("#inputEmail-number").val(); //获取用户名信息    
        var password = $("#inputPassword-password").val(); //获取登陆密码信息    
        var checked = $("input[name='rememberMe']").is(':checked'); //获取“是否记住密码”复选框  
        if (checked) { //判断是否选中了“记住密码”复选框    
            $.cookie("number", number, {
                expires: 7
            }); //调用jquery.cookie.js中的方法设置cookie中的用户名    并保存7天 
            $.cookie("password", Base64.encode(password), {
                expires: 7
            }); //调用jquery.cookie.js中的方法设置cookie中的登陆密码，并使用base64进行加密    
        } else {
            $.cookie("number", number, {
                expires: -1
            }); //调用jquery.cookie.js中的方法设置cookie中的用户名    并删除cookie
            $.cookie("password", Base64.encode(password), {
                expires: -1
            }); //调用jquery.cookie.js中的方法设置cookie中的登陆密码，并使用base64进行加密        
        }
    }

    function getCookie() { //获取cookie    
        var number = $.cookie("number"); //获取cookie中的用户名    
        var password = $.cookie("password"); //获取cookie中的登陆密码    
        if (password) { //密码存在的话把“记住用户名和密码”复选框勾选住    
            $("[name='rememberMe']").attr("checked", "true");
        }
        if (number) { //用户名存在的话把用户名填充到用户名文本框    
            $("#inputEmail-number").val(number);
        }
        if (password) { //密码存在的话把密码填充到密码文本框    
            $("#inputPassword-password").val(Base64.decode(password));
        }
    }

    function login() {
        //判断是否选中复选框，如果选中，添加cookie  
        var check = $("input[name='rememberMe']").is(':checked'); //获取“是否记住密码”复选框 
        if ($("input[name='rememberMe']").is(':checked')) {
            //添加cookie    
            setCookie();
        }
    }

    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('form-horizontal');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>
<script th:src="@{/vendor/jquery/jquery.min.js}" type="javascript"></script>
<script th:src="@{/vendor/popper.js/umd/popper.min.js}" type="javascript"></script>
<script th:src="@{/vendor/bootstrap/js/bootstrap.min.js}" type="javascript"></script>
<script th:src="@{/vendor/jquery.cookie/jquery.cookie.js}" type="javascript"></script>
<script th:src="@{/vendor/chart.js/Chart.min.js}" type="javascript"></script>
<script th:src="@{/vendor/jquery-validation/jquery.validate.min.js}" type="javascript"></script>
<!-- Main File-->
<script th:src="@{/js/front.js}" type="javascript"></script>
<!-- End page content -->


<script src="https://cdn.bootcss.com/Base64/1.0.2/base64.js"></script>
<script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.js"></script>

</body>
</html>